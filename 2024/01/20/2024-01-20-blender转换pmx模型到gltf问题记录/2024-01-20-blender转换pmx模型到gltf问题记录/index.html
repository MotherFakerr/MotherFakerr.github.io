<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="MotherFaker的个人博客"><title>blender转换pmx模型到glb材质问题记录 | MotherFaker的个人博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css"><script src="/js/pace.min.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="MotherFaker的个人博客" type="application/atom+xml">
</head><body><main class="content"><section class="outer"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous"><article id="post-2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">blender转换pmx模型到glb材质问题记录</h1></header><div class="article-meta"><a href="/2024/01/20/2024-01-20-blender%E8%BD%AC%E6%8D%A2pmx%E6%A8%A1%E5%9E%8B%E5%88%B0gltf%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/2024-01-20-blender%E8%BD%AC%E6%8D%A2pmx%E6%A8%A1%E5%9E%8B%E5%88%B0gltf%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" class="article-date"><time datetime="2024-01-20T08:48:00.000Z" itemprop="datePublished">2024-01-20</time></a><div class="article-category"><a class="article-category-link" href="/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/">踩坑记录</a></div></div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><p>记录一下使用blender以及插件mmd_tools转换pmx模型为gltf，并用threejs的GLTFLoader加载时遇到的一些问题。</p><span id="more"></span><h2 id="1加载后材质为黑色"><a class="markdownIt-Anchor" href="#1加载后材质为黑色"></a> 1.加载后材质为黑色</h2><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-0.png" width="300"><p>这是由于材质没有转换成blender材质导致的，需要在mmd_tools中点击<strong>转换给blender</strong>按钮（老版本mmd_tools为convert to material cycles)</p><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-1.png"><h2 id="2加载后出现多余的五颜六色的形体"><a class="markdownIt-Anchor" href="#2加载后出现多余的五颜六色的形体"></a> 2.加载后出现多余的五颜六色的形体</h2><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-2.png" width="300"><p>这是由于刚体也被导出了，需要在blender导出为gltf的时候选中画布内模型，并勾选<strong>选定的物体</strong>选项。</p><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-3.png"><h2 id="3加载后模型部分不显示且半透明"><a class="markdownIt-Anchor" href="#3加载后模型部分不显示且半透明"></a> 3.加载后模型部分不显示且半透明</h2><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-5.gif" width="400"><p>查看模型材质信息发现所有的材质的transparent都设置成了true，depth write设置成了false。查看threejs的GLTFLoader源码后发现了这一段</p><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-4.png"><p>查看gltf文件的材质信息后发现alphaMode果然都设置为了BLEND,这表示为透明材质</p><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-5.png" width="300/"><p>需要在blender中将所有的非透明材质的Blend Mode都设置为Opaque</p><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-6.png" width="400/"><h3 id="最后-完美"><a class="markdownIt-Anchor" href="#最后-完美"></a> <strong>最后。。。。完美</strong></h3><img src="/2024/01/20/2024-01-20-blender转换pmx模型到gltf问题记录/2024-01-20-blender转换pmx模型到gltf问题记录/images/pasted-7.png" width="400/"></div><footer class="article-footer"><a data-url="https://motherfakerr.github.io/2024/01/20/2024-01-20-blender%E8%BD%AC%E6%8D%A2pmx%E6%A8%A1%E5%9E%8B%E5%88%B0gltf%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/2024-01-20-blender%E8%BD%AC%E6%8D%A2pmx%E6%A8%A1%E5%9E%8B%E5%88%B0gltf%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" data-id="clrq183bq001g0cuoh4wy4yth" class="article-share-link">分享</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/blender/" rel="tag">blender</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/threejs/" rel="tag">threejs</a></li></ul></footer></div><nav class="article-nav"><a href="/2024/01/08/2024-01-08-%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95-%E5%87%B8%E5%8C%85%EF%BC%88%E4%BA%8C%EF%BC%89/2024-01-08-%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95-%E5%87%B8%E5%8C%85%EF%BC%88%E4%BA%8C%EF%BC%89/" class="article-nav-link"><strong class="article-nav-caption">后一篇</strong><div class="article-nav-title">计算几何-凸包（二）</div></a></nav></article></section><footer class="footer"><div class="outer"><ul class="list-inline"><li>MotherFaker的个人博客 &copy; 2024</li><li><a href="https://beian.miit.gov.cn/" target="_blank"></a></li><li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li><li>theme <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li></ul><p></p><ul class="list-inline"><li><i class="fe fe-smile-alt tooltip" data-tooltip="访客量"></i> <span id="busuanzi_value_site_uv"></span></li><li><i class="fe fe-bookmark tooltip" data-tooltip="点击量"></i> <span id="busuanzi_value_page_pv"></span></li></ul><p></p></div></footer></main><aside class="sidebar"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="/images/logo.png" alt="MotherFaker的个人博客"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">主页</a></li><li class="nav-item"><a class="nav-item-link" href="/categories/%E6%96%87%E7%AB%A0">文章</a></li><li class="nav-item"><a class="nav-item-link" href="/categories/%E7%AC%94%E8%AE%B0">笔记</a></li><li class="nav-item"><a class="nav-item-link" href="/favorites">收藏</a></li><li class="nav-item"><a class="nav-item-link" href="/categories">类别</a></li><li class="nav-item"><a class="nav-item-link" href="/tags">标签</a></li><li class="nav-item"><a class="nav-item-link" href="/about">关于</a></li><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="fe fe-search"></i> 搜索</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><div class="totop" id="totop"><i class="fe fe-rocket"></i></div></li><li class="nav-item"><a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed"><i class="fe fe-feed"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><script src="/js/jquery-2.0.3.min.js"></script><script src="/js/jquery.justifiedGallery.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="/fancybox/jquery.fancybox.min.js"></script><script src="/js/tocbot.min.js"></script><script>tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="/js/ocean.js"></script></body></html>