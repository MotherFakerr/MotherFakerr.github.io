<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="MotherFaker的个人博客"><title>类别: 文章 | MotherFaker的个人博客</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css"><script src="/js/pace.min.js"></script><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="MotherFaker的个人博客" type="application/atom+xml">
</head><body><main class="content"><section class="outer"><article class="articles"><h1 class="page-type-title">文章</h1><div class="archives-wrap"><div class="archive-year-wrap"><a href="/archives/2024" class="archive-year">2024</a></div><div class="archives"><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2024/01/03/2024-01-03-bfcache%E5%A4%84%E7%90%86/2024-01-03-bfcache%E5%A4%84%E7%90%86/">bfcache处理</a></h2><a href="/2024/01/03/2024-01-03-bfcache%E5%A4%84%E7%90%86/2024-01-03-bfcache%E5%A4%84%E7%90%86/" class="archive-article-date"><time datetime="2024-01-02T16:15:00.000Z" itemprop="datePublished">01/03</time></a></header><p>最近业务上遇到个问题：</p><p>项目里有两个app，当页面初始化的时候会跑一段代码codeA将url中的一些参数存储到WebStorage中。</p><p>当从appA跳转到appB，然后使用浏览器自带的返回按钮返回appA时，发现WebStorage中的参数还是appB的参数，也就是appA的初始化时的代码codeA没有跑。</p><p>查询过后发现是触发了浏览器的bfcache机制。</p><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></div></div></article><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2024/01/03/2024-01-03-%E9%A1%B5%E9%9D%A2%E5%8D%B8%E8%BD%BD%E6%97%B6%E5%90%91%E5%90%8E%E7%AB%AF%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3/2024-01-03-%E9%A1%B5%E9%9D%A2%E5%8D%B8%E8%BD%BD%E6%97%B6%E5%90%91%E5%90%8E%E7%AB%AF%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3/">页面卸载时向后端发送接口</a></h2><a href="/2024/01/03/2024-01-03-%E9%A1%B5%E9%9D%A2%E5%8D%B8%E8%BD%BD%E6%97%B6%E5%90%91%E5%90%8E%E7%AB%AF%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3/2024-01-03-%E9%A1%B5%E9%9D%A2%E5%8D%B8%E8%BD%BD%E6%97%B6%E5%90%91%E5%90%8E%E7%AB%AF%E5%8F%91%E9%80%81%E6%8E%A5%E5%8F%A3/" class="archive-article-date"><time datetime="2024-01-02T16:06:00.000Z" itemprop="datePublished">01/03</time></a></header><p>工作中遇到一个需求，需要在用户关闭或者刷新页面时向后端发送该用户的身份信息。</p><p>浏览器页面卸载时会触发beforeunload和unload事件，由于unload限制比较多，因此这里选择了beforeunload。</p><p><strong>问题</strong>：常用的异步ajax请求在unload/beforeunload事件内是不可靠的，浏览器可能会无视异步请求从而导致后端收不到。可以使用下述方法。</p><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></div></div></article><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2024/01/02/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/">JS 垃圾回收机制</a></h2><a href="/2024/01/02/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" class="archive-article-date"><time datetime="2024-01-02T15:50:00.000Z" itemprop="datePublished">01/02</time></a></header><p>当我们创建对象时，js 会在内存空间开辟地址来存放这个对象的内容。随着软件的运行，创建的对象会越来越多，而当新创建的对象不断添加，不再被使用的老对象却没有被及时清理时，内存占用就会越来越多，造成程序的运行缓慢直到崩溃。这个过程就称为<strong>内存泄漏(Memory Leak)</strong> 。</p><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></div></div></article><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2024/01/02/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/">强引用，弱引用</a></h2><a href="/2024/01/02/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/" class="archive-article-date"><time datetime="2024-01-02T15:34:00.000Z" itemprop="datePublished">01/02</time></a></header><blockquote><p>此概念与JS垃圾回收机制紧密相关：<a href="/2024/01/02/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/2024-01-02-JS%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/" title="JS 垃圾回收机制">JS垃圾回收机制文档传送门</a></p></blockquote><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></div></div></article><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2024/01/02/2024-01-02-weakMap,%20weakSet,%20weakRef/2024-01-02-weakMap,%20weakSet,%20weakRef/">weakMap, weakSet, weakRef</a></h2><a href="/2024/01/02/2024-01-02-weakMap,%20weakSet,%20weakRef/2024-01-02-weakMap,%20weakSet,%20weakRef/" class="archive-article-date"><time datetime="2024-01-02T15:22:00.000Z" itemprop="datePublished">01/02</time></a></header><blockquote><p>前置知识文档：<a href="/2024/01/02/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/2024-01-02-%E5%BC%BA%E5%BC%95%E7%94%A8%EF%BC%8C%E5%BC%B1%E5%BC%95%E7%94%A8/" title="强引用，弱引用">强&#x2F;弱引用传送门</a></p></blockquote><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a></div></div></article></div></div><div class="archives-wrap"><div class="archive-year-wrap"><a href="/archives/2023" class="archive-year">2023</a></div><div class="archives"><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2023/06/14/2023-06-14-%E4%BD%BF%E7%94%A8hexo%E5%86%99%E6%96%87%E7%AB%A0/2023-06-14-%E4%BD%BF%E7%94%A8hexo%E5%86%99%E6%96%87%E7%AB%A0/">使用hexo写文章</a></h2><a href="/2023/06/14/2023-06-14-%E4%BD%BF%E7%94%A8hexo%E5%86%99%E6%96%87%E7%AB%A0/2023-06-14-%E4%BD%BF%E7%94%A8hexo%E5%86%99%E6%96%87%E7%AB%A0/" class="archive-article-date"><time datetime="2023-06-14T05:45:00.000Z" itemprop="datePublished">06/14</time></a></header><p>首先对于博客来说，有<strong>page</strong>和<strong>post</strong>两种不同类型的文章，区别如下：</p><ol><li><p>page：通常是静态的、永久性的内容，它们用于呈现不经常变化的信息。其创建通常是为了提供持久性和易于导航的信息。如本博客右边栏的 <em>关于</em> 就是一篇page。</p></li><li><p>post：通常是网站中的动态内容，它们按时间顺序排列，以反映最新的更新。其可以有不同的分类或标签，以便组织和检索相关内容。如 <em>本文</em> 及 <em>主页</em>，<em>归档</em> 下的所有文章都是post。</p></li></ol><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a> / <a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/%E5%8D%9A%E5%AE%A2/">博客</a></div></div></article><article class="archive-article archive-type-post"><div class="archive-article-inner"><header class="archive-article-header"><h2 class="archive-article-title" itemprop="name"><a href="/2023/06/09/2023-06-09-%E4%BD%BF%E7%94%A8hexo-github%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/2023-06-09-%E4%BD%BF%E7%94%A8hexo-github%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">使用hexo+github建立个人博客</a></h2><a href="/2023/06/09/2023-06-09-%E4%BD%BF%E7%94%A8hexo-github%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/2023-06-09-%E4%BD%BF%E7%94%A8hexo-github%E5%BB%BA%E7%AB%8B%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="archive-article-date"><time datetime="2023-06-09T06:55:00.000Z" itemprop="datePublished">06/09</time></a></header><div style="display:flex;flex-direction:row;align-items:center"><img src="/2023/06/09/2023-06-09-使用hexo-github建立个人博客/2023-06-09-使用hexo-github建立个人博客/pasted-1.png" width="15%" height="15%"> <img src="/2023/06/09/2023-06-09-使用hexo-github建立个人博客/2023-06-09-使用hexo-github建立个人博客/pasted-13.png" width="30%" height="30%"></div><p>用github搭建个人博客不需要考虑购买服务器，注册域名以及备案等等。本文介绍使用开源框架hexo来生成个人博客，整个流程不需要有前端或者后端基础，只要会用git和代码编辑器就行。</p><div class="article-category"><a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/">文章</a> / <a class="article-category-link" href="/categories/%E6%96%87%E7%AB%A0/%E5%8D%9A%E5%AE%A2/">博客</a></div></div></article></div></div></article></section><footer class="footer"><div class="outer"><ul class="list-inline"><li>MotherFaker的个人博客 &copy; 2024</li><li><a href="https://beian.miit.gov.cn/" target="_blank"></a></li><li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li><li>theme <a target="_blank" rel="noopener" href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li></ul><p></p><ul class="list-inline"><li><i class="fe fe-smile-alt tooltip" data-tooltip="访客量"></i> <span id="busuanzi_value_site_uv"></span></li></ul><p></p></div></footer></main><aside class="sidebar"><button class="navbar-toggle"></button><nav class="navbar"><div class="logo"><a href="/"><img src="/images/logo.png" alt="MotherFaker的个人博客"></a></div><ul class="nav nav-main"><li class="nav-item"><a class="nav-item-link" href="/">主页</a></li><li class="nav-item"><a class="nav-item-link" href="/categories/%E6%96%87%E7%AB%A0">文章</a></li><li class="nav-item"><a class="nav-item-link" href="/categories/%E7%AC%94%E8%AE%B0">笔记</a></li><li class="nav-item"><a class="nav-item-link" href="/favorites">收藏</a></li><li class="nav-item"><a class="nav-item-link" href="/categories">类别</a></li><li class="nav-item"><a class="nav-item-link" href="/tags">标签</a></li><li class="nav-item"><a class="nav-item-link" href="/about">关于</a></li><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="fe fe-search"></i> 搜索</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><div class="totop" id="totop"><i class="fe fe-rocket"></i></div></li><li class="nav-item"><a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed"><i class="fe fe-feed"></i></a></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"><input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><script src="/js/jquery-2.0.3.min.js"></script><script src="/js/jquery.justifiedGallery.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="/fancybox/jquery.fancybox.min.js"></script><script src="/js/ocean.js"></script></body></html>